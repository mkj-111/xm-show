<!DOCTYPE html>
<!-- saved from url=(0117)http://www.pmdaniu.com/storage/53164/1d97e8bef5948e3deb76204e56ed8dba-25820/%E4%BC%9A%E5%91%98%E5%88%97%E8%A1%A8.html -->
<html xmlns:th="http://www.w3.org/1999/xhtml" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>会员列表</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="../js/bootstrap/css/bootstrap-table.min.css">
    <link rel="stylesheet" href="../js/bootstrap/css/bootstrap.min.css">
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap/js/bootstrap-table.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap/js/bootstrap-table-zh-CN.min.js"></script>

</head>
<body>

<div id="u3832" class="ax_default" data-label="产品管理(商品管理)" style="left: 0px; width: 840px;">
    <div id="u3832_state0" class="panel_state" data-label="State1" style="width: 840px;">
        <div id="u3832_state0_content" class="panel_state_content" style="margin-left: 0px;">
            <div class="box-tools pull-right">
                <div class="has-feedback">
                    会员名称：<input id="user">
                    会员名称：<input id="staDate"> 至 <input id="endDate">
                    <button class="btn btn-default" onclick="javascript:getSearch()">查询</button>
                </div>
            </div>
            <div class="form-group form-inline">
                <div>
                    <button type="button" class="btn btn-default" title="修改用户"><i class="fa fa-trash-o"></i>修改用户
                    </button>
                    <button type="button" class="btn btn-default" title="添加用户" data-toggle="modal"
                            data-target="#editModal"><i class="fa fa-file-o"></i>添加用户
                    </button>
                    <button type="button" class="btn btn-default" title="关闭用户"><i class="fa fa-trash-o"></i>关闭用户
                    </button>
                    <button type="button" class="btn btn-default" title="刷新" onclick="window.location.reload();"><i
                            class="fa fa-refresh"></i> 刷新
                    </button>
                </div>
            </div>
            <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h3 id="myModalLabel">添加用户</h3>
                        </div>
                        <div class="modal-body">
                            <form method="post" id="ff">
                                <input name="id" id="mid"> <!--type="hidden"-->
                                <table class="table table-bordered table-striped" width="800px">
                                    <tr>
                                        <td>用户名</td>
                                        <td><input class="form-control" placeholder="用户名" name="username" id="username">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>真实姓名</td>
                                        <td><input class="form-control" placeholder="真实姓名" name="name" id="name"></td>
                                    </tr>
                                    <tr>
                                        <td>性别</td>
                                        <td>
                                            <select name="gender" id="gender">
                                                <option value="-1" selected>--请选择性别--</option>
                                                <option value="1">MALE</option>
                                                <option value="2">FEMALE</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>电话</td>
                                        <td><input class="form-control" placeholder="电话" name="phone" id="phone"></td>
                                    </tr>
                                    <tr>
                                        <td>邮箱</td>
                                        <td><input class="form-control" placeholder="邮箱" name="xmEmail" id="xmEmail">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>地址</td>
                                        <td><input class="form-control" placeholder="地址" name="address" id="address">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>加入时间</td>
                                        <td><input class="form-control" placeholder="加入时间" name="addDate" id="addDate">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>地区</td>
                                        <td><input class="form-control" placeholder="地区" name="areaId" id="areaId"></td>
                                    </tr>
                                    <tr>
                                        <td>等级</td>
                                        <td>
                                            <select name="memberrankId" id="memberrankId">
                                                <option value="-1" selected>--请选择等级--</option>
                                                <option value="1">普通用户</option>
                                                <option value="2">会员1级</option>
                                                <option value="3">会员2级</option>
                                                <option value="4">会员3级</option>
                                                <option value="5">会员4级</option>
                                                <option value="6">会员5级</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>状态</td>
                                        <td>
                                            <select name="status" id="status">
                                                <option value="-1" selected>--请选择状态--</option>
                                                <option value="1">启用</option>
                                                <option value="2">禁用</option>
                                                <option value="3">黑名单</option>
                                            </select>
                                        </td>
                                    </tr>
                                </table>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-success" data-dismiss="modal" aria-hidden="true"
                                    onclick="javascript:getAdd()">保存
                            </button>
                            <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">关闭</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 产品2 (动态面板) -->
            <div id="u3833" class="ax_default" data-label="产品2" style="left: 0px; width: 840px;">
                <div id="u3833_state0" class="panel_state" data-label="State1" style="height: 780px; width: 840px;">
                    <div id="u3833_state0_content" class="panel_state_content" style="margin-left: 15px;">
                        <table id="member_table"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript">
    $(function () {
        select();
    })

    function getSearch() {
        alert($("#user").val());
        $("#member_table").bootstrapTable("refresh", {
            query: {
                username: $("#user").val(),
                staDate: $("#staDate").val(),
                endDate: $("#endDate").val(),
            }
        })
    }

    function select() {
        $("#member_table").bootstrapTable({
            url: "/selectyyb",
            columns: [
                {field: 'chec', checkbox: true},
                {field: 'username', title: '用户名', align: 'center', width: 150},
                {field: 'name', title: '真实姓名', align: 'center', width: 150},
                {
                    field: 'gender', title: '性别', align: 'center', width: 150, formatter: function (value, row, index) {
                        if (value == 1) {
                            return "MALE";
                        } else if (value == 2) {
                            return "FEMALE";
                        }
                    }
                },
                {field: 'phone', title: '电话', align: 'center', width: 150},
                {field: 'xmEmail', title: '邮箱', align: 'center', width: 150},
                {field: 'address', title: '地址', align: 'center', width: 150},
                {field: 'addDate', title: '加入时间', align: 'center', width: 150},
                {field: 'rankName', title: '等级', align: 'center', width: 150},
                {
                    field: 'status', title: '状态', align: 'center', width: 150, formatter: function (value, row, index) {
                        if (value == 1) {
                            return "启用";
                        } else if (value == 2) {
                            return "禁用";
                        } else if (value == 3) {
                            return "黑名单";
                        }
                    }
                },
                {
                    field: 'zuo', title: '操作', formatter: function (value, row, index) {
                        str = '<button type="button" class="btn btn-default" title="删除用户" onclick="getDelete(' + row.id + ')" >删除用户</button>' +
                            '<button type="button" class="btn btn-default" title="修改用户" onclick="getUpdate(' + row.id + ')" data-toggle="modal" data-target="#editModal"><i class="fa fa-file-o"></i>修改用户</button>';
                        return str;
                    }
                }
            ],
            pagination: true,
            pageSize: 2,
            PageList: [2, 4, 6, 8, 10]
        });
    }

    function getAdd() {
        $.ajax({
            url: "/addyyb",
            type: "post",
            data: $("#ff").serialize(),
            success: function () {
                $("#member_table").bootstrapTable("refresh");
            }
        })
    }

    function getDelete(id) {
        $.ajax({
            url: "/getDeleteyyb",
            type: "post",
            data: {id: id},
            success: function () {
                $("#member_table").bootstrapTable("refresh");
            }
        });
    }

    function getUpdate(id) {
        alert(id)
        $.ajax({
            url: "/getUpdateyyb",
            type: "post",
            data: {id: id},
            success: function (data) {
                $("#mid").val(data.id);
                $("#address").val(data.address);
                $("#email").val(data.email);
                $("#gender").val(data.gender);
                $("#name").val(data.name);
                $("#phone").val(data.phone);
                $("#username").val(data.username);
                $("#areaId").val(data.areaId);
                $("#memberrankId").val(data.memberrankId);
                $("#status").val(data.status);
                $("#addDate").val(data.addDate);
            }
        });
    }
</script>
</html>